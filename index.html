<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberHub | Digital Store</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --primary: #00a8ff; --dark: #050a12; --card: #0d141f; --text: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--dark); color: var(--text); margin: 0; padding-bottom: 80px; }
        .navbar { padding: 30px; text-align: center; border-bottom: 1px solid #1e293b; }
        .logo { width: 120px; height: auto; margin-bottom: 10px; }
        .container { max-width: 500px; margin: auto; padding: 0 15px; }
        .cat-header { display: flex; align-items: center; margin: 30px 0 10px; border-bottom: 1px solid #1e293b; padding-bottom: 10px; }
        .cat-logo { width: 30px; height: 30px; margin-right: 12px; }
        .section-title { color: var(--primary); font-size: 1rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        .sub-name { color: #8b949e; font-size: 0.8rem; margin: 15px 0 8px; font-weight: 600; }
        .product-card { background: var(--card); border: 1px solid #1e293b; border-radius: 12px; padding: 12px 15px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.2s; font-size: 0.9rem; }
        .product-card:hover { border-color: var(--primary); background: #111a27; }
        .price { color: var(--primary); font-weight: bold; }
        .contact-btn { display: block; background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); color: white; text-align: center; padding: 15px; border-radius: 12px; text-decoration: none; font-weight: bold; margin-top: 40px; }
        #orderModal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:1000; justify-content:center; align-items:center; }
        .modal-content { background: var(--card); padding: 30px; border-radius: 20px; width: 90%; max-width: 400px; border: 1px solid var(--primary); text-align: center; }
        input { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #1e293b; background: #050a12; color: white; box-sizing: border-box; }
        .submit-btn { background: var(--primary); color: white; border: none; padding: 15px; border-radius: 8px; width: 100%; cursor: pointer; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="navbar">
        <img src="https://i.ibb.co/VvW0q4M/Cyber-Hub-Logo.png" class="logo" alt="CyberHub">
        <div style="font-size: 1.5rem; font-weight: 800; letter-spacing: 2px;">CYBERHUB</div>
    </div>

    <div class="container" id="product-list">
        </div>

    <div class="container">
        <a href="https://instagram.com/__cyber__hub__" class="contact-btn">Instagram Support ðŸ“¸</a>
    </div>

    <div id="orderModal">
        <div class="modal-content">
            <div id="formContainer">
                <h3 id="modalProduct" style="margin-top:0; color: var(--primary);">Order Item</h3>
                <form id="orderForm">
                    <input type="hidden" id="pName">
                    <input type="tel" id="uPhone" placeholder="NumÃ©ro de TÃ©lÃ©phone" required>
                    <input type="text" id="uInsta" placeholder="Username Instagram" required>
                    <button type="submit" class="submit-btn">Confirmer la Commande</button>
                    <button type="button" onclick="closeModal()" style="background:none; border:none; color:#64748b; margin-top:10px; cursor:pointer; width:100%">Annuler</button>
                </form>
            </div>
            <div id="successMessage" style="display:none">
                <div style="font-size: 3rem;">âœ…</div>
                <h3>Commande EnvoyÃ©e !</h3>
                <p style="color: #8b949e;">Nous vous contacterons sur Instagram trÃ¨s bientÃ´t.</p>
                <button onclick="closeModal()" class="submit-btn">Fermer</button>
            </div>
        </div>
    </div>

    <script>
        (function(){ emailjs.init("aVLHyVhILMDCu8T99"); })();

        fetch('products.json')
            .then(res => res.json())
            .then(data => {
                const list = document.getElementById('product-list');
                data.categories.forEach(cat => {
                    let html = `
                        <div class="cat-header">
                            <img src="${cat.logo_url}" class="cat-logo">
                            <div class="section-title">${cat.name}</div>
                        </div>`;
                    cat.subcategories.forEach(sub => {
                        html += `<div class="sub-name">${sub.name}</div>`;
                        sub.items.forEach(item => {
                            html += `
                                <div class="product-card" onclick="openModal('${item.name}', '${item.price}')">
                                    <span>${item.name}</span>
                                    <span class="price">${item.price}</span>
                                </div>`;
                        });
                    });
                    list.innerHTML += html;
                });
            });

        function openModal(n, p) { 
            document.getElementById('formContainer').style.display = 'block';
            document.getElementById('successMessage').style.display = 'none';
            document.getElementById('modalProduct').innerText = n; 
            document.getElementById('pName').value = n + " (" + p + ")";
            document.getElementById('orderModal').style.display = 'flex'; 
        }

        function closeModal() { document.getElementById('orderModal').style.display = 'none'; }

        document.getElementById('orderForm').onsubmit = function(e) {
            e.preventDefault();
            emailjs.send("service_default", "template_r8b7yaf", { 
                product_name: document.getElementById('pName').value,
                customer_phone: document.getElementById('uPhone').value,
                customer_instagram: document.getElementById('uInsta').value
            }).then(() => {
                document.getElementById('formContainer').style.display = 'none';
                document.getElementById('successMessage').style.display = 'block';
            });
        };
    </script>
</body>
</html>
