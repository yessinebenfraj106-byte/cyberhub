<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberHub - Advanced Store</title>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>emailjs.init("aVLHyVhILMDCu8T99");</script>
    <style>
        :root {
            --primary: #00a8ff; /* Your Blue Glow */
            --bg: #020617;      /* Dark Space Blue */
            --card: rgba(15, 23, 42, 0.9);
        }
        body {
            background-color: var(--bg);
            background-image: radial-gradient(circle at top right, #001f3f, transparent),
                              radial-gradient(circle at bottom left, #000814, transparent);
            color: white;
            font-family: 'Orbitron', sans-serif;
            margin: 0; padding: 20px; min-height: 100vh;
        }
        .container {
            max-width: 500px;
            margin: auto;
            background: var(--card);
            border: 1px solid var(--primary);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 168, 255, 0.3);
            backdrop-filter: blur(10px);
        }
        .logo { width: 150px; filter: drop-shadow(0 0 10px var(--primary)); margin-bottom: 20px; }
        h1 { text-transform: uppercase; letter-spacing: 3px; font-size: 1.5rem; color: var(--primary); }
        
        select, input {
            width: 100%; padding: 12px; margin: 10px 0;
            background: #0f172a; border: 1px solid #1e293b;
            color: white; border-radius: 8px; outline: none;
        }
        select:focus, input:focus { border-color: var(--primary); box-shadow: 0 0 10px var(--primary); }

        #confirm-btn {
            width: 100%; padding: 15px; margin-top: 20px;
            background: var(--primary); color: white;
            border: none; border-radius: 8px; font-weight: bold;
            cursor: pointer; transition: 0.3s;
        }
        #confirm-btn:hover { box-shadow: 0 0 20px var(--primary); transform: translateY(-2px); }

        footer { margin-top: 40px; font-size: 0.8rem; color: #475569; }
        .yessine-credit { color: var(--primary); text-shadow: 0 0 5px var(--primary); font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <img src="Cyber-Hub-Logo.png" class="logo" alt="CyberHub">
    <h1>CyberHub Store</h1>

    <form id="order-form" onsubmit="processOrder(event)">
        <label>Cat√©gorie:</label>
        <select id="category" onchange="updateSub()"><option>Chargement...</option></select>

        <label>Sous-cat√©gorie:</label>
        <select id="subcategory" onchange="updateItems()"><option>--</option></select>

        <label>Produit:</label>
        <select id="product-select"><option>--</option></select>

        <input type="text" id="name" placeholder="Votre Nom" required>
        <input type="text" id="contact" placeholder="WhatsApp / Tel" required>

        <button type="submit" id="confirm-btn">CONFIRMER LA COMMANDE</button>
    </form>
</div>

<footer>
    <p>Made by <span class="yessine-credit">Yessine Ben Fraj</span></p>
</footer>

<script>
    // ‚ö†Ô∏è REPLACE THIS WITH YOUR SHEET CSV LINK
    const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSRfkUtzcSKcO8fKFVvqCUGU221FL8_h2s3f3E6OXfMJJm3rYTTt_Foi9AurxvLquOFsBbW5h4VVyRF/pub?output=csv";

    let inventory = [];

    // Fetch data from Google Sheet
    async function loadInventory() {
        try {
            const response = await fetch(SHEET_URL);
            const data = await response.text();
            // Basic CSV parser logic... (I can help you refine this once you have the link)
            alert("Inventaire charg√© !");
        } catch (e) { console.error("Could not load items"); }
    }

    function processOrder(event) {
        event.preventDefault();
        const btn = document.getElementById('confirm-btn');
        btn.innerText = "Traitement...";
        btn.disabled = true;

        const orderInfo = `
            Produit: ${document.getElementById('product-select').value}
            Client: ${document.getElementById('name').value}
            Contact: ${document.getElementById('contact').value}
        `;

        emailjs.send("service_default", "template_r8b7yaf", {
            customer_name: document.getElementById('name').value,
            message_body: orderInfo
        }).then(() => {
            alert("üöÄ Commande envoy√©e !");
            window.location.reload();
        }).catch((err) => {
            alert("Erreur!");
            btn.disabled = false;
        });
    }
</script>
</body>
</html>
